var makeDom=require("../utils").makeDom,helpers=require("../.."),assert=require("assert");describe("helpers",function(){describe("removeSubsets",function(){var a=helpers.removeSubsets,b=makeDom("<div><p><span></span></p><p></p></div>")[0];it("removes identical trees",function(){var c=a([b,b]);assert.equal(c.length,1)}),it("Removes subsets found first",function(){var c=a([b,b.children[0].children[0]]);assert.equal(c.length,1)}),it("Removes subsets found last",function(){var c=a([b.children[0],b]);assert.equal(c.length,1)}),it("Does not remove unique trees",function(){var c=a([b.children[0],b.children[1]]);assert.equal(c.length,2)})}),describe("compareDocumentPosition",function(){var a=helpers.compareDocumentPosition,b="<div><p><span></span></p><a></a></div>",c=makeDom(b)[0],d=c.children[0],e=d.children[0],f=c.children[1];it("reports when the first node occurs before the second indirectly",function(){assert.equal(a(e,f),2)}),it("reports when the first node contains the second",function(){assert.equal(a(d,e),10)}),it("reports when the first node occurs after the second indirectly",function(){assert.equal(a(f,e),4)}),it("reports when the first node is contained by the second",function(){assert.equal(a(e,d),20)}),it("reports when the nodes belong to separate documents",function(){var c=makeDom(b)[0].children[0].children[0];assert.equal(a(e,c),1)}),it("reports when the nodes are identical",function(){assert.equal(a(e,e),0)})}),describe("uniqueSort",function(){var a,b,c,d,e=helpers.uniqueSort;beforeEach(function(){a=makeDom("<div><p><span></span></p><a></a></div>")[0],b=a.children[0],c=b.children[0],d=a.children[1]}),it("leaves unique elements untouched",function(){assert.deepEqual(e([b,d]),[b,d])}),it("removes duplicate elements",function(){assert.deepEqual(e([b,d,b]),[b,d])}),it("sorts nodes in document order",function(){assert.deepEqual(e([d,a,c,b]),[a,b,c,d])})})});