var expect=require("expect.js"),cheerio=require("../..");describe("$(...)",function(){describe(".css",function(){it("(prop): should return a css property value",function(){var a=cheerio('<li style="hai: there">');expect(a.css("hai")).to.equal("there")}),it("([prop1, prop2]): should return the specified property values as an object",function(){var a=cheerio('<li style="margin: 1px; padding: 2px; color: blue;">');expect(a.css(["margin","color"])).to.eql({margin:"1px",color:"blue"})}),it("(prop, val): should set a css property",function(){var a=cheerio('<li style="margin: 0;"></li><li></li>');a.css("color","red"),expect(a.attr("style")).to.equal("margin: 0; color: red;"),expect(a.eq(1).attr("style")).to.equal("color: red;")}),it('(prop, ""): should unset a css property',function(){var a=cheerio('<li style="padding: 1px; margin: 0;">');a.css("padding",""),expect(a.attr("style")).to.equal("margin: 0;")}),it("(prop): should not mangle embedded urls",function(){var a=cheerio('<li style="background-image:url(http://example.com/img.png);">');expect(a.css("background-image")).to.equal("url(http://example.com/img.png)")}),it("(prop): should ignore blank properties",function(){var a=cheerio('<li style=":#ccc;color:#aaa;">');expect(a.css()).to.eql({color:"#aaa"})}),it("(prop): should ignore blank values",function(){var a=cheerio('<li style="color:;position:absolute;">');expect(a.css()).to.eql({position:"absolute"})}),describe("(prop, function):",function(){beforeEach(function(){this.$el=cheerio('<div style="margin: 0px;"></div><div style="margin: 1px;"></div><div style="margin: 2px;">')}),it("should iterate over the selection",function(){var a=0,b=this.$el;this.$el.css("margin",function(c,d){expect(c).to.equal(a),expect(d).to.equal(a+"px"),expect(this).to.equal(b[a]),a++}),expect(a).to.equal(3)}),it("should set each attribute independently",function(){var a=["4px","",void 0];this.$el.css("margin",function(b){return a[b]}),expect(this.$el.eq(0).attr("style")).to.equal("margin: 4px;"),expect(this.$el.eq(1).attr("style")).to.equal(""),expect(this.$el.eq(2).attr("style")).to.equal("margin: 2px;")})}),it("(obj): should set each key and val",function(){var a=cheerio('<li style="padding: 0;"></li><li></li>');a.css({foo:0}),expect(a.eq(0).attr("style")).to.equal("padding: 0; foo: 0;"),expect(a.eq(1).attr("style")).to.equal("foo: 0;")}),describe("parser",function(){it("should allow any whitespace between declarations",function(){var a=cheerio('<li style="one 	:\n 0;\n two \f\r: 1">');expect(a.css(["one","two"])).to.eql({one:0,two:1})})})})});